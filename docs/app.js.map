{"version":3,"sources":["app/Http.js","app/Utils.js","app/components/articles.js","app/components/banner.js","app/components/comments.js","app/components/feed-nav.js","app/components/follow-favorite.js","app/components/index.js","app/components/loader.js","app/components/paginator.js","app/components/sidebar.js","app/index.js","app/initialize.js","app/layout/footer.js","app/layout/header.js","app/layout/index.js","app/model.js","app/pages/article.js","app/pages/editor.js","app/pages/home.js","app/pages/login.js","app/pages/profile.js","app/pages/register.js","app/pages/user.js","app/routes.js"],"names":["api","onProgress","mdl","e","lengthComputable","state","loadingProgress","max","total","value","loaded","m","redraw","onLoad","onLoadStart","isLoading","onLoadEnd","xhrProgress","config","xhr","onprogress","onload","onloadstart","onloadend","parseHttpError","rej","response","errors","parseHttpSuccess","res","data","getUserToken","sessionStorage","getItem","authorization","call","_headers","method","url","body","Task","request","headers","withCredentials","then","Http","getTask","deleteTask","postTask","putTask","log","v","console","favoriteArticleUrl","slug","favoriteArticleTask","http","unFavoriteArticleTask","ArticlePreview","attrs","article","toggleArticleLike","favorited","onError","onSuccess","favoritesCount","toggle","fork","view","route","Link","href","username","options","replace","src","image","createdAt","onclick","title","description","tagList","map","tag","Articles","articles","length","Banner","children","getCommentsTask","deleteCommentTask","id","trimBody","trim","submitTask","comment","CommentForm","reload","submit","oninit","rows","placeholder","onchange","target","user","Comment","author","deleteComment","trust","Comments","comments","loadComments","chain","x","c","FeedNav","fetchData","isLoggedIn","tags","current","selected","deleteArticleUrl","followAuthorUrl","deleteArticleTask","followAuthorTask","unFollowAuthorTask","FollowFavorite","toggleAuthorFollow","following","profile","deleteArticle","s","set","selector","Loader","Paginator","fetchDataFor","Math","ceil","limit","offset","range","Array","keys","slice","page","idx","SideBar","selectTag","push","root","document","winW","window","innerWidth","module","hot","accept","process","env","NODE_ENV","navigator","addEventListener","serviceWorker","register","registration","registrationError","getProfile","w","checkWidth","lastProfile","model","settings","requestAnimationFrame","JSON","parse","require","footer","Header","Layout","Footer","getArticleTask","Article","status","error","loadData","reloadArticle","loadArticleTask","formatTags","uniq","submitArticleTask","Editor","initEditor","submitData","type","getTagsTask","getArticlesTask","loadDataTask","of","ap","Home","feedStatus","pageStatus","loadInitData","articlesCount","loadArticles","loginTask","Login","email","password","onSubmit","setItem","token","stringify","onblur","isSubmitted","validate","getProfileTask","getAuthorArticlesTask","getAuthorFavoriteArticlesTask","showFaveArticles","loadInitDataTask","authorArticles","Profile","authorFavoriteArticles","result","selectFeed","toShowFaveArticles","bio","registerTask","errorViewModel","err","Object","k","key","values","Register","logout","clear","User","routes","onmatch","render"],"mappings":"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","file":"docs/app.js","sourcesContent":["const api = \"https://conduit.productionready.io/api/\"\r\n\r\nconst onProgress = (mdl) => (e) => {\r\n  if (e.lengthComputable) {\r\n    mdl.state.loadingProgress.max = e.total\r\n    mdl.state.loadingProgress.value = e.loaded\r\n    m.redraw()\r\n  }\r\n}\r\n\r\nfunction onLoad() {\r\n  return false\r\n}\r\n\r\nconst onLoadStart = (mdl) => (e) => {\r\n  mdl.state.isLoading = true\r\n  return false\r\n}\r\n\r\nconst onLoadEnd = (mdl) => (e) => {\r\n  mdl.state.isLoading = false\r\n  mdl.state.loadingProgress.max = 0\r\n  mdl.state.loadingProgress.value = 0\r\n  return false\r\n}\r\n\r\nconst xhrProgress = (mdl) => ({\r\n  config: (xhr) => {\r\n    xhr.onprogress = onProgress(mdl)\r\n    xhr.onload = onLoad\r\n    xhr.onloadstart = onLoadStart(mdl)\r\n    xhr.onloadend = onLoadEnd(mdl)\r\n  },\r\n})\r\n\r\nexport const parseHttpError = (mdl) => (rej) => (e) => {\r\n  mdl.state.isLoading = false\r\n  return rej(e.response.errors)\r\n}\r\n\r\nexport const parseHttpSuccess = (mdl) => (res) => (data) => {\r\n  mdl.state.isLoading = false\r\n  return res(data)\r\n}\r\n\r\nconst getUserToken = () =>\r\n  sessionStorage.getItem(\"token\")\r\n    ? { authorization: sessionStorage.getItem(\"token\") }\r\n    : \"\"\r\n\r\nconst call = (_headers) => (method) => (mdl) => (url) => (body) => {\r\n  mdl.state.isLoading = true\r\n  return new Task((rej, res) =>\r\n    m\r\n      .request({\r\n        method,\r\n        url: api + url,\r\n        headers: {\r\n          \"content-type\": \"application/json\",\r\n          ..._headers,\r\n        },\r\n        body,\r\n        withCredentials: false,\r\n        ...xhrProgress(mdl),\r\n      })\r\n      .then(parseHttpSuccess(mdl)(res), parseHttpError(mdl)(rej))\r\n  )\r\n}\r\n\r\nconst Http = {\r\n  getTask: (mdl) => (url) => call(getUserToken())(\"GET\")(mdl)(url)(null),\r\n  deleteTask: (mdl) => (url) => call(getUserToken())(\"DELETE\")(mdl)(url)(null),\r\n  postTask: (mdl) => (url) => (data) =>\r\n    call(getUserToken())(\"POST\")(mdl)(url)(data),\r\n  putTask: (mdl) => (url) => (data) =>\r\n    call(getUserToken())(\"PUT\")(mdl)(url)(data),\r\n}\r\n\r\nexport default Http\r\n","export const log = (m) => (v) => {\r\n  console.log(m, v)\r\n  return v\r\n}\r\n","import Http from \"Http\"\r\nimport { log } from \"Utils\"\r\n\r\nconst favoriteArticleUrl = (slug) => `articles/${slug}/favorite`\r\nconst favoriteArticleTask = (http) => (mdl) => (slug) =>\r\n  http.postTask(mdl)(favoriteArticleUrl(slug))()\r\n\r\nconst unFavoriteArticleTask = (http) => (mdl) => (slug) =>\r\n  http.deleteTask(mdl)(favoriteArticleUrl(slug))\r\n\r\nconst ArticlePreview = ({ attrs: { mdl, article } }) => {\r\n  let data = article\r\n  const toggleArticleLike = (favorited, slug) => {\r\n    const onError = log(\"toggleArticleLike err-art\")\r\n    const onSuccess = ({ article: { favorited, favoritesCount } }) => {\r\n      data.favorited = favorited\r\n      data.favoritesCount = favoritesCount\r\n    }\r\n\r\n    let toggle = favorited ? unFavoriteArticleTask : favoriteArticleTask\r\n    toggle(Http)(mdl)(slug).fork(onError, onSuccess)\r\n  }\r\n\r\n  return {\r\n    view: () => {\r\n      return m(\".article-preview\", [\r\n        m(\".article-meta\", [\r\n          m(\r\n            m.route.Link,\r\n            { href: `/profile/${data.username}`, options: { replace: true } },\r\n            m(\"img\", { src: data.image })\r\n          ),\r\n\r\n          m(\".info\", [\r\n            m(\r\n              m.route.Link,\r\n              {\r\n                class: \"author\",\r\n                href: `/profile/${data.username}`,\r\n                options: { replace: true },\r\n              },\r\n              data.username\r\n            ),\r\n            m(\"span.date\", data.createdAt),\r\n          ]),\r\n          m(\r\n            \"button.btn btn-outline-primary btn-sm pull-xs-right\",\r\n            {\r\n              onclick: (e) => toggleArticleLike(data.favorited, data.slug),\r\n              class: data.favorited && \"active\",\r\n            },\r\n            [m(\"i.ion-heart.p-5\"), m(\"span\", data.favoritesCount)]\r\n          ),\r\n        ]),\r\n        m(\r\n          m.route.Link,\r\n          { class: \"preview-link\", href: `/article/${data.slug}` },\r\n          [\r\n            m(\"h1\", data.title),\r\n            m(\"p\", data.description),\r\n            m(\r\n              \"ul.tag-list\",\r\n              data.tagList.map((tag) =>\r\n                m(\"li.tag-default tag-pill tag-outline\", tag)\r\n              )\r\n            ),\r\n            m(\"span\", \"Read more...\"),\r\n          ]\r\n        ),\r\n      ])\r\n    },\r\n  }\r\n}\r\n\r\nexport const Articles = () => {\r\n  return {\r\n    view: ({ attrs: { mdl, data } }) => {\r\n      return data.articles.length\r\n        ? data.articles.map((article) =>\r\n            m(ArticlePreview, { mdl, data, article })\r\n          )\r\n        : m(\"p\", \"No articles are here... yet.\")\r\n    },\r\n  }\r\n}\r\n","export const Banner = () => {\r\n  return {\r\n    view: ({ children }) => m(\".banner\", m(\".container\", children)),\r\n  }\r\n}\r\n","import Http from \"Http\"\r\nimport { log } from \"Utils\"\r\nimport { lensProp, over, trim } from \"ramda\"\r\n\r\nconst getCommentsTask = (http) => (mdl) => (slug) =>\r\n  http.getTask(mdl)(`articles/${slug}/comments`)\r\n\r\nconst deleteCommentTask = (http) => (mdl) => (slug) => (id) =>\r\n  http.deleteTask(mdl)(`articles/${slug}/comments/${id}`)\r\n\r\nconst trimBody = over(lensProp(\"body\"), trim)\r\n\r\nconst submitTask = (http) => (mdl) => (comment) =>\r\n  http.postTask(mdl)(`articles/${mdl.slug}/comments`)({ comment })\r\n\r\nconst CommentForm = ({ attrs: { mdl, reload } }) => {\r\n  const comment = { body: \"\" }\r\n\r\n  const onError = log(\"Error with form \")\r\n\r\n  const onSuccess = () => {\r\n    comment.body = \"\"\r\n    reload()\r\n  }\r\n\r\n  const submit = (comment) =>\r\n    submitTask(Http)(mdl)(trimBody(comment)).fork(onError, onSuccess)\r\n\r\n  return {\r\n    oninit: () => (comment.body = \"\"),\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\"form.card.comment-form\", [\r\n        m(\r\n          \".card-block\",\r\n          m(\"textarea.form-control\", {\r\n            rows: 3,\r\n            placeholder: \"Write a comment ...\",\r\n            onchange: (e) => (comment.body = e.target.value),\r\n            value: comment.body,\r\n          })\r\n        ),\r\n        m(\".card-footer\", [\r\n          m(\"img.comment-author-img\", { src: mdl.user.image }),\r\n          m(\r\n            \"button.btn.btn-sm.btn-primary\",\r\n            { onclick: (e) => submit(comment) },\r\n            \" Post Comment \"\r\n          ),\r\n        ]),\r\n      ]),\r\n  }\r\n}\r\n\r\nconst Comment = () => {\r\n  return {\r\n    view: ({\r\n      attrs: {\r\n        mdl,\r\n        comment: {\r\n          author: { image, username },\r\n          body,\r\n          createdAt,\r\n          id,\r\n        },\r\n        deleteComment,\r\n      },\r\n    }) =>\r\n      m(\".card\", [\r\n        m(\".card-block\", m(\"p.card-text\", body)),\r\n        m(\".card-footer\", [\r\n          m(\r\n            m.route.Link,\r\n            { class: \"comment-author\" },\r\n            m(\"img.comment-author-img\", { src: image })\r\n          ),\r\n          \" \",\r\n          m.trust(\"&nbsp;\"),\r\n          \" \",\r\n          m(m.route.Link, { class: \"comment-author\" }, username),\r\n          m(\"span.date-posted\", createdAt),\r\n          username == mdl.user.username &&\r\n            m(\"span.mod-options\", [\r\n              m(\"i.ion-trash-a\", { onclick: (e) => deleteComment(id) }),\r\n            ]),\r\n        ]),\r\n      ]),\r\n  }\r\n}\r\n\r\nexport const Comments = ({ attrs: { mdl } }) => {\r\n  const data = { comments: [] }\r\n\r\n  const loadComments = (mdl) => {\r\n    const onSuccess = ({ comments }) => (data.comments = comments)\r\n\r\n    const onError = log(\"error with coomments\")\r\n\r\n    getCommentsTask(Http)(mdl)(mdl.slug).fork(onError, onSuccess)\r\n  }\r\n\r\n  const deleteComment = (id) => {\r\n    const onSuccess = ({ comments }) => (data.comments = comments)\r\n\r\n    const onError = log(\"error with coomments\")\r\n\r\n    deleteCommentTask(Http)(mdl)(mdl.slug)(id)\r\n      .chain((x) => getCommentsTask(Http)(mdl)(mdl.slug))\r\n      .fork(onError, onSuccess)\r\n  }\r\n\r\n  return {\r\n    oninit: ({ attrs: { mdl } }) => loadComments(mdl),\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        \".row\",\r\n        m(\".col-xs-12.col-md-8.offset-md-2\", [\r\n          m(CommentForm, { mdl, reload: () => loadComments(mdl) }),\r\n          data.comments.map((c) =>\r\n            m(Comment, {\r\n              mdl,\r\n              comment: c,\r\n              deleteComment: (id) => deleteComment(id),\r\n            })\r\n          ),\r\n        ])\r\n      ),\r\n  }\r\n}\r\n","import { without } from \"ramda\"\n\nexport const FeedNav = ({ attrs: { fetchData } }) => {\n  return {\n    view: ({ attrs: { mdl, data } }) => {\n      return m(\n        \".feed-toggle\",\n        m(\"ul.nav nav-pills outline-active\", [\n          mdl.state.isLoggedIn() &&\n            m(\n              \"li.nav-item\",\n              m(\n                `a.nav-link ${data.tags.current == \"feed\" && \"active\"}`,\n                {\n                  onclick: (e) => {\n                    data.tags.current = \"feed\"\n                    fetchData(mdl)\n                  },\n                },\n                \"Your Feed\"\n              )\n            ),\n\n          m(\n            \"li.nav-item\",\n            m(\n              `a.nav-link ${data.tags.current == \"\" && \"active\"}`,\n              {\n                onclick: (e) => {\n                  data.tags.current = \"\"\n                  fetchData(mdl)\n                },\n              },\n              \"Global Feed\"\n            )\n          ),\n\n          data.tags.selected.map((tag) =>\n            m(\n              \"li.nav-item\",\n              m(`a.nav-link ${data.tags.current == tag && \"active\"}`, [\n                m(\n                  \"span\",\n                  {\n                    onclick: (e) => {\n                      data.tags.current = tag\n                      fetchData(mdl)\n                    },\n                  },\n                  tag\n                ),\n                m(\"i.ion-close-circled\", {\n                  onclick: (e) =>\n                    (data.tags.selected = without(tag, data.tags.selected)),\n                }),\n              ])\n            )\n          ),\n        ])\n      )\n    },\n  }\n}\n","import Http from \"Http\"\r\nimport { log } from \"Utils\"\r\n\r\nconst deleteArticleUrl = (slug) => `articles/${slug}`\r\nconst favoriteArticleUrl = (slug) => `articles/${slug}/favorite`\r\nconst followAuthorUrl = (author) => `profiles/${author}/follow`\r\n\r\nconst deleteArticleTask = (http) => (mdl) =>\r\n  http.deleteTask(mdl)(favoriteArticleUrl(mdl.slug))\r\n\r\nconst favoriteArticleTask = (http) => (mdl) =>\r\n  http.postTask(mdl)(favoriteArticleUrl(mdl.slug))()\r\n\r\nconst unFavoriteArticleTask = (http) => (mdl) =>\r\n  http.deleteTask(mdl)(favoriteArticleUrl(mdl.slug))\r\n\r\nconst followAuthorTask = (http) => (mdl) => (author) =>\r\n  http.postTask(mdl)(followAuthorUrl(author))()\r\n\r\nconst unFollowAuthorTask = (http) => (mdl) => (author) =>\r\n  http.deleteTask(mdl)(followAuthorUrl(author))\r\n\r\nexport const FollowFavorite = ({ attrs: { mdl, data } }) => {\r\n  const toggleArticleLike = ({ favorited }) => {\r\n    const onError = log(\"toggleArticleLike err-art\")\r\n    const onSuccess = ({ article: { favorited, favoritesCount } }) => {\r\n      data.favorited = favorited\r\n      data.favoritesCount = favoritesCount\r\n    }\r\n\r\n    let toggle = favorited ? unFavoriteArticleTask : favoriteArticleTask\r\n    toggle(Http)(mdl).fork(onError, onSuccess)\r\n  }\r\n\r\n  const toggleAuthorFollow = ({ author: { username, following } }) => {\r\n    const onError = log(\"toggleAuthorFollow, err-auth\")\r\n    const onSuccess = ({ profile: { following } }) =>\r\n      (data.author.following = following)\r\n\r\n    let toggle = following ? unFollowAuthorTask : followAuthorTask\r\n    toggle(Http)(mdl)(username).fork(onError, onSuccess)\r\n  }\r\n\r\n  const deleteArticle = (slug) => {\r\n    const onError = log(\"deleteArticle, err-auth\")\r\n    const onSuccess = (s) => {\r\n      console.log(s)\r\n      m.route.set(\"/home\")\r\n    }\r\n    deleteArticleTask(Http)(mdl).fork(onError, onSuccess)\r\n  }\r\n\r\n  return {\r\n    view: ({\r\n      attrs: {\r\n        mdl,\r\n        data: {\r\n          author: { username, image, following },\r\n          favoritesCount,\r\n          favorited,\r\n          createdAt,\r\n          slug,\r\n        },\r\n      },\r\n    }) => {\r\n      return m(\".article-meta\", [\r\n        m(\r\n          m.route.Link,\r\n          { href: `profile/${username}` },\r\n          m(\"img\", { src: image })\r\n        ),\r\n        m(\".info\", [\r\n          m(\r\n            m.route.Link,\r\n            { class: \"author\", href: `profile/${username}` },\r\n            username\r\n          ),\r\n          m(\"span.date\", createdAt),\r\n        ]),\r\n        mdl.user.username == username\r\n          ? [\r\n              m(\r\n                m.route.Link,\r\n                {\r\n                  class: \"btn btn-sm btn-outline-secondary\",\r\n                  href: `/editor/${slug}`,\r\n                  selector: \"button\",\r\n                },\r\n                [m(\"i.ion-edit.p-5\"), \"Edit Article\"]\r\n              ),\r\n              m(\r\n                \"button.btn.btn-sm.btn-outline-danger.m-5\",\r\n                { onclick: (e) => deleteArticle(slug) },\r\n                [m(\"i.ion-trash-a.m-5\"), \"Delete Article \"]\r\n              ),\r\n            ]\r\n          : [\r\n              m(\r\n                \"button.btn.btn-sm.btn-outline-secondary\",\r\n                { onclick: (e) => toggleAuthorFollow(data) },\r\n                [\r\n                  following\r\n                    ? [m(\"i.ion-minus-round\"), ` Unfollow ${username} `]\r\n                    : [m(\"i.ion-plus-round\"), ` Follow ${username} `],\r\n                ]\r\n              ),\r\n              m(\r\n                \"button.btn.btn-sm.btn-outline-primary.m-5\",\r\n                { onclick: (e) => toggleArticleLike(data) },\r\n                [\r\n                  m(\"i.ion-heart.m-5\"),\r\n                  favorited ? \" Unfavorite Article \" : \" Favorite Article \",\r\n                  m(\"span.counter\", `( ${favoritesCount} )`),\r\n                ]\r\n              ),\r\n            ],\r\n      ])\r\n    },\r\n  }\r\n}\r\n","export * from \"./banner\"\r\nexport * from \"./loader\"\r\nexport * from \"./paginator\"\r\nexport * from \"./articles\"\r\nexport * from \"./follow-favorite\"\r\nexport * from \"./comments\"\r\nexport * from \"./feed-nav\"\r\nexport * from \"./sidebar\"\r\n","export const Loader = () => {\r\n  return {\r\n    view: ({ children }) =>\r\n      m(\".container\", m(\".banner\", m(\".container\", children))),\r\n  }\r\n}\r\n","export const Paginator = () => {\r\n  return {\r\n    view: ({ attrs: { state, fetchDataFor } }) => {\r\n      let total = Math.ceil(state.total / state.limit) + 1\r\n      let current = state.offset / state.limit + 1\r\n      let range = [...Array(total).keys()].slice(1)\r\n      return (\r\n        state.total > state.limit &&\r\n        m(\r\n          \"ul.pagination\",\r\n          range.map((page, idx) => {\r\n            return m(\r\n              `li.page-item ${page == current && \"active\"}`,\r\n              m(\r\n                \".page-link active\",\r\n                {\r\n                  onclick: (e) => fetchDataFor(idx * state.limit),\r\n                },\r\n                page\r\n              )\r\n            )\r\n          })\r\n        )\r\n      )\r\n    },\r\n  }\r\n}\r\n","export const SideBar = () => {\n  const selectTag = (data, tag) => (e) => data.tags.selected.push(tag)\n\n  return {\n    view: ({ attrs: { mdl, data } }) => {\n      return m(\".sidebar\", [\n        m(\"p\", \"Popular Tags\"),\n        m(\n          \".tag-list\",\n          data.tags.tagList.map((tag) =>\n            m(\".tag-pill tag-default\", { onclick: selectTag(data, tag) }, tag)\n          )\n        ),\n      ])\n    },\n  }\n}\n","import routes from \"./routes.js\"\nimport model from \"./model.js\"\n\nconst root = document.body\nlet winW = window.innerWidth\n\nif (module.hot) {\n  module.hot.accept()\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  console.log(\"Looks like we are in development mode!\")\n} else {\n  if (\"serviceWorker\" in navigator) {\n    window.addEventListener(\"load\", () => {\n      navigator.serviceWorker\n        .register(\"./service-worker.js\")\n        .then((registration) => {\n          console.log(\" SW registered: \", registration)\n        })\n        .catch((registrationError) => {\n          console.log(\" SW registration failed: \", registrationError)\n        })\n    })\n  }\n}\n\n// set display profiles\nconst getProfile = (w) => {\n  if (w < 668) return \"phone\"\n  if (w < 920) return \"tablet\"\n  return \"desktop\"\n}\n\nconst checkWidth = (winW) => {\n  const w = window.innerWidth\n  if (winW !== w) {\n    winW = w\n    var lastProfile = model.settings.profile\n    model.settings.profile = getProfile(w)\n    if (lastProfile != model.settings.profile) m.redraw()\n  }\n  return requestAnimationFrame(checkWidth)\n}\n\nmodel.settings.profile = getProfile(winW)\n\ncheckWidth(winW)\n\nif (sessionStorage.getItem(\"user\")) {\n  model.user = JSON.parse(sessionStorage.getItem(\"user\"))\n}\n\nm.route(root, \"/home\", routes(model))\n","document.addEventListener(\"DOMContentLoaded\", () => {\n  require(\"./index.js\")\n})\n","const footer = () => {\r\n  return {\r\n    view: () =>\r\n      m(\r\n        \"footer\",\r\n        m(\"div\", { class: \"container\" }, [\r\n          m(\"a\", { class: \"logo-font\", href: \"/\" }, \"conduit\"),\r\n          m(\"span\", { class: \"attribution\" }, [\r\n            \" An interactive learning project from \",\r\n            m(\"a\", { href: \"https://thinkster.io\" }, \"Thinkster\"),\r\n            \". Code \",\r\n            m.trust(\"&amp;\"),\r\n            \" design licensed under MIT. \",\r\n          ]),\r\n        ])\r\n      ),\r\n  }\r\n}\r\n\r\nexport default footer\r\n","const Header = () => {\r\n  return {\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        \"nav.navbar navbar-light\",\r\n        m(\r\n          \".container\",\r\n          m(\"a.navbar-brand\", { href: \"#\" }, \"conduit\"),\r\n          m(\r\n            \"ul.nav navbar-nav pull-xs-right\",\r\n            mdl.state.isLoggedIn()\r\n              ? [\r\n                  m(\r\n                    \"li.nav-item\",\r\n                    m(m.route.Link, { class: \"nav-link\", href: \"/editor\" }, [\r\n                      m(\"i.ion-compose.p-5\"),\r\n                      \"New Article\",\r\n                    ])\r\n                  ),\r\n                  m(\r\n                    \"li.nav-item\",\r\n                    m(\r\n                      m.route.Link,\r\n                      {\r\n                        class: \"nav-link\",\r\n                        href: `/settings/${mdl.user.username}`,\r\n                      },\r\n                      [m(\"i.ion-gear-a.p-5\"), \"Settings\"]\r\n                    )\r\n                  ),\r\n                  m(\r\n                    \"li.nav-item\",\r\n                    m(\r\n                      m.route.Link,\r\n                      {\r\n                        class: \"nav-link\",\r\n                        href: `/profile/${mdl.user.username}`,\r\n                      },\r\n                      mdl.user.username\r\n                    )\r\n                  ),\r\n                ]\r\n              : [\r\n                  m(\r\n                    \"li.nav-item\",\r\n                    m(\r\n                      m.route.Link,\r\n                      { class: \"nav-link\", href: \"/register\" },\r\n                      \"Sign up\"\r\n                    )\r\n                  ),\r\n                  m(\r\n                    \"li.nav-item\",\r\n                    m(\r\n                      m.route.Link,\r\n                      { class: \"nav-link\", href: \"/login\" },\r\n                      \"Login\"\r\n                    )\r\n                  ),\r\n                ]\r\n          )\r\n        )\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Header\r\n","import Header from \"./header.js\"\r\nimport Footer from \"./footer.js\"\r\n\r\nconst Layout = () => {\r\n  return {\r\n    view: ({ children, attrs: { mdl } }) =>\r\n      m(\"\", [m(Header, { mdl }), children, m(Footer, { mdl })]),\r\n  }\r\n}\r\n\r\nexport default Layout\r\n","const model = {\n  state: {\n    isLoading: false,\n    loadingProgress: { max: 0, value: 0 },\n    isLoggedIn: () => sessionStorage.getItem(\"token\"),\n  },\n  settings: {},\n  page: \"\",\n  user: {},\n}\n\nexport default model\n","import Http from \"Http\"\r\nimport { Banner, FollowFavorite, Comments } from \"components\"\r\nimport md from \"marked\"\r\n\r\nconst getArticleTask = (http) => (mdl) => (slug) =>\r\n  http.getTask(mdl)(`articles/${slug}`)\r\n\r\nconst Article = () => {\r\n  const data = {}\r\n  const state = {\r\n    status: \"loading\",\r\n    error: null,\r\n  }\r\n\r\n  const onSuccess = ({ article, comments }) => {\r\n    data.article = article\r\n    data.comments = comments\r\n    state.status = \"success\"\r\n  }\r\n\r\n  const onError = (error) => {\r\n    console.log(\"error\", error)\r\n    state.error = error\r\n    state.status = \"error\"\r\n  }\r\n\r\n  const loadData = (mdl) => {\r\n    state.status = \"loading\"\r\n    getArticleTask(Http)(mdl)(mdl.slug).fork(onError, onSuccess)\r\n  }\r\n\r\n  return {\r\n    oninit: ({ attrs: { mdl } }) => loadData(mdl),\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\".article-page\", [\r\n        state.status == \"loading\" &&\r\n          m(Banner, [m(\"h1.logo-font\", \"Loading ...\")]),\r\n        state.status == \"error\" &&\r\n          m(Banner, [m(\"h1.logo-font\", `Error Loading Data: ${state.error}`)]),\r\n\r\n        state.status == \"success\" && [\r\n          m(\r\n            \".banner\",\r\n            m(\".container\", [\r\n              m(\"h1\", data.article.title),\r\n              m(FollowFavorite, {\r\n                mdl,\r\n                data: data.article,\r\n              }),\r\n            ])\r\n          ),\r\n          m(\".container.page\", [\r\n            m(\r\n              \".row.article-content\",\r\n              m(\".col-md-12.text-justify\", m.trust(md(data.article.body)))\r\n            ),\r\n            m(\"hr\"),\r\n\r\n            m(\".article-actions\", [\r\n              m(FollowFavorite, {\r\n                mdl,\r\n                data: data.article,\r\n              }),\r\n            ]),\r\n            m(Comments, {\r\n              mdl,\r\n              comments: data.comments,\r\n              reloadArticle: () => loadData(mdl),\r\n            }),\r\n          ]),\r\n        ],\r\n      ]),\r\n  }\r\n}\r\n\r\nexport default Article\r\n","import Http from \"Http\"\r\nimport { compose, lensProp, over, split, trim, uniq } from \"ramda\"\r\n\r\nexport const loadArticleTask = (http) => (mdl) => (slug) =>\r\n  http.getTask(mdl)(`articles/${slug}`)\r\n\r\nconst formatTags = over(lensProp(\"tagList\"), compose(uniq, split(\" \"), trim))\r\n\r\nexport const submitArticleTask = (http) => (mdl) => (article) =>\r\n  http.postTask(mdl)(\"articles\")({ article: formatTags(article) })\r\n\r\nconst Editor = ({ attrs: { mdl } }) => {\r\n  let data = {}\r\n  const state = {}\r\n\r\n  const initEditor = (mdl) => {\r\n    const onSuccess = ({ article }) => {\r\n      data = article\r\n      console.log(data)\r\n    }\r\n\r\n    const onError = (errors) => {\r\n      state.errors = errors\r\n    }\r\n\r\n    if (mdl.slug) {\r\n      loadArticleTask(Http)(mdl)(mdl.slug).fork(onError, onSuccess)\r\n    }\r\n  }\r\n\r\n  const submitData = (data) => {\r\n    const onSuccess = ({ article: { slug } }) => {\r\n      m.route.set(`/article/${slug}`)\r\n    }\r\n\r\n    const onError = (errors) => {\r\n      state.errors = errors\r\n    }\r\n    submitArticleTask(Http)(mdl)(data).fork(onError, onSuccess)\r\n  }\r\n\r\n  return {\r\n    oninit: ({ attrs: { mdl } }) => initEditor(mdl),\r\n    view: () =>\r\n      m(\r\n        \".editor-page\",\r\n        m(\r\n          \".container.page\",\r\n          m(\r\n            \".row\",\r\n            m(\r\n              \".col-md-10.offset-md-1.col-xs-12\",\r\n              m(\"form\", [\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"text\",\r\n                    placeholder: \"Article Title\",\r\n                    onchange: (e) => (data.title = e.target.value),\r\n                    value: data.title,\r\n                  })\r\n                ),\r\n\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"text\",\r\n                    placeholder: \"What's this article about?\",\r\n                    onchange: (e) => (data.description = e.target.value),\r\n                    value: data.description,\r\n                  })\r\n                ),\r\n\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"textarea.form-control.form-control-lg\", {\r\n                    rows: 8,\r\n                    placeholder: \"Write your article (in markdown)\",\r\n                    onchange: (e) => (data.body = e.target.value),\r\n                    value: data.body,\r\n                  })\r\n                ),\r\n\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"text\",\r\n                    placeholder: \"Enter tags\",\r\n                    onchange: (e) => (data.tagList = e.target.value),\r\n                    value: data.tagList,\r\n                  })\r\n                ),\r\n\r\n                m(\r\n                  \"button.btn-lg.pull-xs-right.btn-primary\",\r\n                  { onclick: (e) => submitData(data) },\r\n                  \" Publish Article \"\r\n                ),\r\n              ])\r\n            )\r\n          )\r\n        )\r\n      ),\r\n  }\r\n}\r\nexport default Editor\r\n","import Http from \"Http\"\nimport {\n  Banner,\n  Loader,\n  Paginator,\n  Articles,\n  FeedNav,\n  SideBar,\n} from \"components\"\n\nconst getTagsTask = (http) => (mdl) => http.getTask(mdl)(\"tags\")\nconst getArticlesTask = (http) => (mdl) => (state) => (data) =>\n  data.tags.current == \"feed\"\n    ? http.getTask(mdl)(`articles/feed?limit=20&offset=${state.offset}`)\n    : http.getTask(mdl)(\n        `articles?limit=20&offset=${state.offset}&tag=${data.tags.current}`\n      )\n\nconst loadDataTask = (http) => (mdl) => (state) => (data) =>\n  Task.of((tags) => (articles) => ({ ...tags, ...articles }))\n    .ap(getTagsTask(http)(mdl))\n    .ap(getArticlesTask(http)(mdl)(state)(data))\n\nconst Home = () => {\n  const data = {\n    tags: { tagList: [], selected: [], current: \"\" },\n    articles: {},\n  }\n  const state = {\n    feedStatus: \"loading\",\n    pageStatus: \"loading\",\n    limit: 20,\n    offset: 0,\n    total: 0,\n    error: null,\n  }\n\n  const loadInitData = (mdl) => {\n    const onSuccess = ({ articles, articlesCount, tags }) => {\n      data.articles = articles\n      state.total = articlesCount\n      data.tags.tagList = tags\n      state.pageStatus = \"success\"\n      state.feedStatus = \"success\"\n    }\n\n    const onError = (error) => {\n      console.log(\"error\", error)\n      state.error = error\n      state.pageStatus = \"error\"\n    }\n    state.pageStatus = \"loading\"\n    loadDataTask(Http)(mdl)(state)(data).fork(onError, onSuccess)\n  }\n\n  const loadArticles = (mdl) => {\n    const onSuccess = ({ articles, articlesCount }) => {\n      data.articles = articles\n      state.total = articlesCount\n      state.feedStatus = \"success\"\n    }\n\n    const onError = (error) => {\n      console.log(\"error\", error)\n      state.error = error\n      state.feedStatus = \"error\"\n    }\n\n    state.feedStatus = \"loading\"\n    getArticlesTask(Http)(mdl)(state)(data).fork(onError, onSuccess)\n  }\n\n  return {\n    oninit: ({ attrs: { mdl } }) => loadInitData(mdl),\n    view: ({ attrs: { mdl } }) => {\n      return m(\".home-page\", [\n        !mdl.state.isLoggedIn() &&\n          m(Banner, [\n            m(\"h1.logo-font\", \"conduit\"),\n            m(\"p\", \"A place to share your knowledge.\"),\n          ]),\n\n        state.pageStatus == \"loading\" &&\n          m(Loader, [m(\"h1.logo-font\", `Loading Data`)]),\n\n        state.pageStatus == \"error\" &&\n          m(Banner, [m(\"h1.logo-font\", `Error Loading Data: ${state.error}`)]),\n\n        state.pageStatus == \"success\" &&\n          m(\n            \".container page\",\n            m(\".row\", [\n              m(\".col-md-9\", [\n                m(FeedNav, { fetchData: loadArticles, mdl, data }),\n\n                state.feedStatus == \"loading\" && m(\"p\", \"Loading Articles ...\"),\n\n                state.feedStatus == \"success\"\n                  ? state.total\n                    ? [\n                        m(Articles, { mdl, data }),\n\n                        m(Paginator, {\n                          mdl,\n                          state,\n                          fetchDataFor: (offset) => {\n                            state.offset = offset\n                            loadArticles(mdl)\n                          },\n                        }),\n                      ]\n                    : m(\"p.pull-xs-left\", \"No articles are here... yet.\")\n                  : \"\",\n              ]),\n\n              m(\".col-md-3\", m(SideBar, { mdl, data })),\n            ])\n          ),\n      ])\n    },\n  }\n}\n\nexport default Home\n","import Http from \"Http\"\r\n\r\nexport const loginTask = (http) => (mdl) => (user) =>\r\n  http.postTask(mdl)(\"users/login\")({ user })\r\n\r\nconst Login = () => {\r\n  const state = { errors: {} }\r\n  const data = {\r\n    email: \"\",\r\n    password: \"\",\r\n  }\r\n\r\n  const onSubmit = (mdl) => {\r\n    const onSuccess = ({ user }) => {\r\n      sessionStorage.setItem(\"token\", `Token ${user.token}`)\r\n      sessionStorage.setItem(\"user\", JSON.stringify(user))\r\n      mdl.user = user\r\n      m.route.set(\"/home\")\r\n    }\r\n\r\n    const onError = (errors) => {\r\n      state.errors = errors\r\n      console.log(state.errors)\r\n    }\r\n\r\n    loginTask(Http)(mdl)(data).fork(onError, onSuccess)\r\n  }\r\n\r\n  return {\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        \"div.auth-page\",\r\n        m(\r\n          \"div.container.page\",\r\n          m(\r\n            \"div.row\",\r\n            m(\"div.col-md-6.offset-md-3.col-xs-12\", [\r\n              m(\"h1.text-xs-center\", \"Login\"),\r\n              m(\r\n                \"p.text-xs-center\",\r\n                m(m.route.Link, { href: \"/register\" }, \"Need an account?\"),\r\n                state.errors[\"email or password\"] &&\r\n                  m(\r\n                    \".error-messages\",\r\n                    m(\r\n                      \"span\",\r\n                      `email or password  ${state.errors[\"email or password\"]}`\r\n                    )\r\n                  )\r\n              ),\r\n              m(\"form\", [\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"text\",\r\n                    placeholder: \"email\",\r\n                    onchange: (e) => (data.email = e.target.value),\r\n                    value: data.email,\r\n                    onblur: (e) => state.isSubmitted && validate,\r\n                  }),\r\n                  state.errors.email &&\r\n                    m(\".error-messages\", m(\"span\", state.errors.email))\r\n                ),\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"password\",\r\n                    placeholder: \"password\",\r\n                    onchange: (e) => (data.password = e.target.value),\r\n                    value: data.password,\r\n                    onblur: (e) => state.isSubmitted && validate,\r\n                  })\r\n                ),\r\n                m(\r\n                  \"button.btn.btn-lg.btn-primary.pull-xs-right\",\r\n                  { type: \"submit\", onclick: (e) => onSubmit(mdl) },\r\n                  \"Login\"\r\n                ),\r\n              ]),\r\n            ])\r\n          )\r\n        )\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Login\r\n","import Http from \"Http\"\r\nimport { Banner, Loader, Articles, Paginator } from \"components\"\r\n\r\nconst getProfileTask = (http) => (mdl) => (username) =>\r\n  http.getTask(mdl)(`profiles/${username}`)\r\n\r\nconst getAuthorArticlesTask = (http) => (mdl) => (state) => (username) =>\r\n  http.getTask(mdl)(\r\n    `articles?limit=${state.limit}&offset=${state.offset}&author=${username}`\r\n  )\r\n\r\nconst getAuthorFavoriteArticlesTask = (http) => (mdl) => (state) => (\r\n  username\r\n) =>\r\n  http.getTask(mdl)(\r\n    `articles?limit=${state.limit}&offset=${state.offset}&favorited=${username}`\r\n  )\r\n\r\nexport const loadDataTask = (http) => (mdl) => (state) =>\r\n  state.showFaveArticles\r\n    ? getAuthorFavoriteArticlesTask(http)(mdl)(state)(mdl.slug)\r\n    : getAuthorArticlesTask(http)(mdl)(state)(mdl.slug)\r\n\r\nexport const loadInitDataTask = (http) => (mdl) => (state) =>\r\n  Task.of((profile) => (authorArticles) => ({\r\n    ...profile,\r\n    authorArticles,\r\n  }))\r\n    .ap(getProfileTask(http)(mdl)(mdl.slug))\r\n    .ap(getAuthorArticlesTask(http)(mdl)(state)(mdl.slug))\r\n\r\nconst Profile = ({ attrs: { mdl } }) => {\r\n  const data = {\r\n    authorArticles: { articles: [], articlesCount: 0 },\r\n    authorFavoriteArticles: { articles: [], articlesCount: 0 },\r\n  }\r\n\r\n  const state = {\r\n    pageStatus: \"loading\",\r\n    feedStatus: \"loading\",\r\n    showFaveArticles: false,\r\n    limit: 5,\r\n    offset: 0,\r\n    total: 0,\r\n    error: null,\r\n  }\r\n\r\n  const loadData = (mdl) => {\r\n    const onSuccess = (result) => {\r\n      state.showFaveArticles\r\n        ? (data.authorFavoriteArticles = result)\r\n        : (data.authorArticles = result)\r\n\r\n      state.total = state.showFaveArticles\r\n        ? data.authorFavoriteArticles.articlesCount\r\n        : data.authorArticles.articlesCount\r\n      state.feedStatus = \"success\"\r\n    }\r\n\r\n    const onError = (error) => {\r\n      console.log(\"error\", error)\r\n      state.error = error\r\n      state.feedStatus = \"error\"\r\n    }\r\n\r\n    state.feedStatus = \"loading\"\r\n    loadDataTask(Http)(mdl)(state).fork(onError, onSuccess)\r\n  }\r\n\r\n  const loadInitData = (mdl) => {\r\n    const onSuccess = ({ authorArticles, profile }) => {\r\n      data.authorArticles = authorArticles\r\n      data.profile = profile\r\n      state.pageStatus = \"success\"\r\n      state.feedStatus = \"success\"\r\n      state.total = data.authorArticles.articlesCount\r\n    }\r\n\r\n    const onError = (error) => {\r\n      console.log(\"error\", error)\r\n      state.error = error\r\n      state.pageStatus = \"error\"\r\n      m.route.set(\"/home\")\r\n    }\r\n\r\n    state.pageStatus = \"loading\"\r\n    loadInitDataTask(Http)(mdl)(state).fork(onError, onSuccess)\r\n  }\r\n\r\n  const selectFeed = (toShowFaveArticles) => {\r\n    state.showFaveArticles = toShowFaveArticles\r\n    state.offset = 0\r\n    loadData(mdl)\r\n  }\r\n\r\n  return {\r\n    oninit: ({ attrs: { mdl } }) => loadInitData(mdl),\r\n    view: ({ attrs: { mdl } }) => {\r\n      return m(\r\n        \".profile-page\",\r\n\r\n        state.pageStatus == \"loading\" &&\r\n          m(Loader, [m(\"h1.logo-font\", \"Loading ...\")]),\r\n        state.pageStatus == \"error\" &&\r\n          m(Banner, [m(\"h1.logo-font\", `Error Loading Data: ${state.error}`)]),\r\n        state.pageStatus == \"success\" && [\r\n          m(\r\n            \".user-info\",\r\n            m(\r\n              \".container\",\r\n              m(\r\n                \".row\",\r\n                m(\".col-xs-12.col-md-10.offset-md-1\", [\r\n                  m(\"img.user-img\", { src: data.profile.image }),\r\n                  m(\"h4\", data.profile.username),\r\n                  m(\"p\", data.profile.bio),\r\n                  data.profile.username !== mdl.user.username\r\n                    ? m(\"button.btn.btn-sm.btn-outline-secondary.action-btn\", [\r\n                        m(\"i.ion-plus-round\"),\r\n                        \" \",\r\n                        m.trust(\"&nbsp;\"),\r\n                        `Follow ${data.profile.username}`,\r\n                      ])\r\n                    : m(\r\n                        \"button.btn.btn-sm.btn-outline-secondary.action-btn\",\r\n                        {\r\n                          onclick: (e) =>\r\n                            m.route.set(`/settings/${data.profile.username}`),\r\n                        },\r\n                        [\r\n                          m(\"i.ion-gear-a\"),\r\n                          \" \",\r\n                          m.trust(\"&nbsp;\"),\r\n                          `Edit Profile Settings`,\r\n                        ]\r\n                      ),\r\n                ])\r\n              )\r\n            )\r\n          ),\r\n          m(\r\n            \".container\",\r\n            m(\r\n              \".row\",\r\n              m(\".col-xs-12.col-md-10.offset-md-1\", [\r\n                m(\r\n                  \".articles-toggle\",\r\n                  m(\"ul.nav.nav-pills.outline-active\", [\r\n                    m(\r\n                      \"li.nav-item\",\r\n                      m(\r\n                        `a.nav-link ${!state.showFaveArticles && \"active\"}`,\r\n                        {\r\n                          onclick: (e) => selectFeed(false),\r\n                        },\r\n                        \"My Articles\"\r\n                      )\r\n                    ),\r\n                    m(\r\n                      \"li.nav-item\",\r\n                      m(\r\n                        `a.nav-link ${state.showFaveArticles && \"active\"}`,\r\n                        {\r\n                          onclick: (e) => selectFeed(true),\r\n                        },\r\n                        \"Favorited Articles\"\r\n                      )\r\n                    ),\r\n                  ])\r\n                ),\r\n                state.feedStatus == \"loading\" && \"Loading Articles...\",\r\n                state.feedStatus == \"error\" &&\r\n                  m(Banner, [\r\n                    m(\"h1.logo-font\", `Error Loading Data: ${state.error}`),\r\n                  ]),\r\n                (state.feedStatus = \"sucess\" && [\r\n                  state.showFaveArticles\r\n                    ? m(Articles, { mdl, data: data.authorFavoriteArticles })\r\n                    : m(Articles, { mdl, data: data.authorArticles }),\r\n\r\n                  m(Paginator, {\r\n                    mdl,\r\n                    state,\r\n                    fetchDataFor: (offset) => {\r\n                      state.offset = offset\r\n                      loadData(mdl)\r\n                    },\r\n                  }),\r\n                ]),\r\n              ])\r\n            )\r\n          ),\r\n        ]\r\n      )\r\n    },\r\n  }\r\n}\r\n\r\nexport default Profile\r\n","import Http from \"Http\"\r\n\r\nconst registerTask = (http) => (mdl) => (user) =>\r\n  http.postTask(mdl)(\"users\")({ user })\r\n\r\nconst errorViewModel = (err) =>\r\n  Object.keys(err).map((k) => ({ key: k, values: err[k] }))\r\n\r\nconst Register = () => {\r\n  const state = { errors: [] }\r\n  const data = {\r\n    username: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  }\r\n\r\n  const onSubmit = (mdl) => {\r\n    const onSuccess = ({ user }) => {\r\n      mdl.user = user\r\n      sessionStorage.setItem(\"token\", `Token ${user.token}`)\r\n      m.route.set(\"/home\")\r\n      console.log(\"success\", user)\r\n    }\r\n\r\n    const onError = (errors) => {\r\n      state.errors = errorViewModel(errors)\r\n      console.log(errors)\r\n    }\r\n\r\n    state.isSubmitted = true\r\n    registerTask(Http)(mdl)(data).fork(onError, onSuccess)\r\n  }\r\n\r\n  return {\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        \".auth-page\",\r\n        m(\r\n          \".container.page\",\r\n          m(\r\n            \".row\",\r\n            m(\".col-md-6.offset-md-3.col-xs-12\", [\r\n              m(\"h1.text-xs-center\", \"Sign Up\"),\r\n              m(\r\n                \"p.text-xs-center\",\r\n                m(m.route.Link, { href: \"/login\" }, \"Have an account?\")\r\n              ),\r\n\r\n              state.errors &&\r\n                state.errors.map((e) =>\r\n                  m(\r\n                    \".error-messages\",\r\n                    m(\r\n                      \"ul\",\r\n                      `${e.key}`,\r\n                      e.values.map((error) => m(\"li\", error))\r\n                    )\r\n                  )\r\n                ),\r\n\r\n              m(\"form\", [\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"text\",\r\n                    placeholder: \"Your Name\",\r\n                    onchange: (e) => (data.username = e.target.value),\r\n                    value: data.username,\r\n                  })\r\n                ),\r\n\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"text\",\r\n                    placeholder: \"email\",\r\n                    onchange: (e) => (data.email = e.target.value),\r\n                    value: data.email,\r\n                  })\r\n                ),\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"password\",\r\n                    placeholder: \"password\",\r\n                    onchange: (e) => (data.password = e.target.value),\r\n                    value: data.password,\r\n                  })\r\n                ),\r\n                m(\r\n                  \"button.btn.btn-lg.btn-primary.pull-xs-right\",\r\n                  { type: \"submit\", onclick: (e) => onSubmit(mdl) },\r\n                  \"Sign Up\"\r\n                ),\r\n              ]),\r\n            ])\r\n          )\r\n        )\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Register\r\n","import Http from \"Http\"\r\nimport { log } from \"Utils\"\r\n\r\nconst logout = () => {\r\n  sessionStorage.clear()\r\n  m.route.set(\"/home\")\r\n}\r\n\r\nconst submitTask = (http) => (mdl) => (data) => http.putTask(mdl)(\"user\")(data)\r\n\r\nconst User = ({\r\n  attrs: {\r\n    mdl: {\r\n      user: { image, username, password, bio, email },\r\n    },\r\n  },\r\n}) => {\r\n  let data = { image, username, password, bio, email }\r\n  const submit = (mdl, data) => {\r\n    const onSuccess = ({ user }) => {\r\n      sessionStorage.setItem(\"user\", JSON.stringify(user))\r\n      mdl.user = user\r\n      console.log(mdl.user)\r\n      m.route.set(\"/home\")\r\n    }\r\n    const onError = log(\"error\")\r\n    submitTask(Http)(mdl)(data).fork(onError, onSuccess)\r\n  }\r\n\r\n  return {\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        \".settings-page\",\r\n        m(\r\n          \".container.page\",\r\n          m(\r\n            \".row\",\r\n            m(\".col-md-6.offset-md-3.col-xs-12\", [\r\n              m(\"h1.text-xs-center\", \"Your Settings\"),\r\n              m(\r\n                \"form\",\r\n                m(\"fieldset\", [\r\n                  m(\r\n                    \"fieldset.form-group\",\r\n                    m(\"input.form-control.form-control-lg\", {\r\n                      type: \"text\",\r\n                      placeholder: \"URL of profile picture\",\r\n                      onchange: (e) => (data.image = e.target.value),\r\n                      value: data.image,\r\n                    })\r\n                  ),\r\n                  m(\r\n                    \"fieldset.form-group\",\r\n                    m(\"input.form-control.form-control-lg\", {\r\n                      type: \"text\",\r\n                      placeholder: \"Your Name\",\r\n                      onchange: (e) => (data.username = e.target.value),\r\n                      value: data.username,\r\n                    })\r\n                  ),\r\n                  m(\r\n                    \"fieldset.form-group\",\r\n                    m(\"textarea.form-control.form-control-lg\", {\r\n                      placeholder: \"Short bio about you\",\r\n                      onchange: (e) => (data.bio = e.target.value),\r\n                      value: data.bio,\r\n                    })\r\n                  ),\r\n                  m(\r\n                    \"fieldset.form-group\",\r\n                    m(\r\n                      \"fieldset.form-group\",\r\n                      m(\"input.form-control.form-control-lg\", {\r\n                        type: \"text\",\r\n                        placeholder: \"Email\",\r\n                        onchange: (e) => (data.email = e.target.value),\r\n                        value: data.email,\r\n                      })\r\n                    )\r\n                  ),\r\n                  m(\r\n                    \"fieldset.form-group\",\r\n                    m(\r\n                      \"fieldset.form-group\",\r\n                      m(\"input.form-control.form-control-lg\", {\r\n                        type: \"password\",\r\n                        placeholder: \"Password\",\r\n                        onchange: (e) => (data.password = e.target.value),\r\n                        value: data.password,\r\n                      })\r\n                    )\r\n                  ),\r\n                  m(\r\n                    \"button.btn.btn-lg.btn-primary.pull-xs-right\",\r\n                    { onclick: (e) => submit(mdl, data) },\r\n                    \" Update Settings \"\r\n                  ),\r\n                  m(\r\n                    \"button.btn.btn-outline-danger.pull-xs-right\",\r\n                    { onclick: (e) => logout(mdl, data) },\r\n                    \"Or click here to logout.\"\r\n                  ),\r\n                ])\r\n              ),\r\n            ])\r\n          )\r\n        )\r\n      ),\r\n  }\r\n}\r\n\r\nexport default User\r\n","import Layout from \"./layout/index\"\nimport Home from \"./pages/home\"\nimport Article from \"./pages/article\"\nimport Profile from \"./pages/profile\"\nimport Register from \"./pages/register\"\nimport Login from \"./pages/login\"\nimport User from \"./pages/user\"\nimport Editor from \"./pages/editor\"\n\nconst routes = (mdl) => {\n  return {\n    \"/home\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Home, { mdl })),\n    },\n\n    \"/editor\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Editor, { mdl })),\n    },\n\n    \"/editor/:slug\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Editor, { mdl })),\n    },\n\n    \"/article/:slug\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Article, { mdl })),\n    },\n\n    \"/profile/:slug\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Profile, { mdl, key: mdl.slug })),\n    },\n\n    \"/settings/:slug\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(User, { mdl, key: mdl.slug })),\n    },\n\n    \"/login\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Login, { mdl })),\n    },\n\n    \"/register\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Register, { mdl })),\n    },\n  }\n}\n\nexport default routes\n"]}