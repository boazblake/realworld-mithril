{"version":3,"sources":["app/Http.js","app/Utils.js","app/Validations.js","app/components/article-preview.js","app/components/articles.js","app/components/banner.js","app/components/index.js","app/components/loader.js","app/components/paginator.js","app/index.js","app/initialize.js","app/layout/footer.js","app/layout/header.js","app/layout/index.js","app/model.js","app/pages/article/index.js","app/pages/article/model.js","app/pages/auth/login.js","app/pages/auth/model.js","app/pages/auth/model.validate.js","app/pages/auth/register.js","app/pages/home/feednav.js","app/pages/home/index.js","app/pages/home/model.js","app/pages/home/sidebar.js","app/pages/profile/index.js","app/pages/profile/model.js","app/pages/settings/index.js","app/pages/settings/model.js","app/routes.js"],"names":["api","onProgress","mdl","e","lengthComputable","state","loadingProgress","max","total","value","loaded","m","redraw","onLoad","onLoadStart","isLoading","onLoadEnd","xhrProgress","config","xhr","onprogress","onload","onloadstart","onloadend","parseHttpError","rej","response","errors","parseHttpSuccess","res","data","getUserToken","sessionStorage","getItem","authorization","call","_headers","method","url","body","Task","request","headers","withCredentials","then","Http","getTask","postTask","log","v","console","getOrElse","val","x","validate","rule","lens","msg","isRequired","not","isEmpty","IsNotNil","isNil","isNotNullOrEmpty","isNullOrEmpty","maxLength","length","maxSize","emailFormat","onlyAlpha","onlyAlphaNumeric","onlyAlphaNumericUnderscore","onlyAlphaNumericSpace","onlyAlphaNumericSpaceUnderscore","onlyAlphaNumericSpaceSpecial","phoneFormat","urlFormat","onlyNumeric","maxLengthNullable","Maybe","fromNullable","unique","keys","lookup","toString","y","inDateRange","start","end","Date","allCaps","str","toUpperCase","isNilOrEmptyOrAtom","item","ArticlePreview","view","attrs","article","author","image","username","createdAt","favoritesCount","title","description","tagList","slug","route","Link","href","options","replace","src","map","tag","Articles","articles","any","Banner","children","Loader","Paginator","fetchDataFor","limit","current","offset","range","Array","slice","page","onclick","FunConfig","configure","root","document","winW","window","innerWidth","module","hot","accept","process","env","NODE_ENV","navigator","addEventListener","serviceWorker","register","registration","registrationError","getProfile","w","checkWidth","lastProfile","model","settings","profile","requestAnimationFrame","user","JSON","parse","require","footer","trust","Header","Layout","Footer","FollowComponent","CommentForm","Comment","comment","id","ArticleComments","comments","c","Article","status","error","onSuccess","onError","loadData","fork","oninit","getCommentsTask","http","getArticleTask","loadDataTask","of","ap","Login","isSubmitted","isValid","email","password","s","onSubmit","setItem","token","stringify","set","chain","type","placeholder","onchange","target","onblur","loginTask","registerTask","ValidateRegistration","identity","ValidateLogin","nameLense","passwordLense","emailLense","NAME_REQUIRED_MSG","PASSWORD_REQUIRED_MSG","EMAIL_REQUIRED_MSG","INVALID_EMAIL_FORMAT","validateName","apLeft","validateEmail","validatePassword","validateRegisterTask","failureMap","mergeAll","toTask","validateLoginTask","Register","FeedNav","fetchData","tags","selected","Home","feedStatus","pageStatus","loadInitData","articlesCount","loadArticles","SideBar","getTagsTask","getArticlesTask","selectTag","push","Profile","showFaveArticles","authorArticles","authorFavoriteArticles","bio","getProfileTask","getAuthorArticlesTask","getAuthorFavoriteArticlesTask","Settings","loadTask","routes","onmatch","render","key"],"mappings":"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","file":"docs/app.js","sourcesContent":["const api = \"https://conduit.productionready.io/api/\"\r\n\r\nconst onProgress = (mdl) => (e) => {\r\n  if (e.lengthComputable) {\r\n    mdl.state.loadingProgress.max = e.total\r\n    mdl.state.loadingProgress.value = e.loaded\r\n    m.redraw()\r\n  }\r\n}\r\n\r\nfunction onLoad() {\r\n  return false\r\n}\r\n\r\nconst onLoadStart = (mdl) => (e) => {\r\n  mdl.state.isLoading = true\r\n  return false\r\n}\r\n\r\nconst onLoadEnd = (mdl) => (e) => {\r\n  mdl.state.isLoading = false\r\n  mdl.state.loadingProgress.max = 0\r\n  mdl.state.loadingProgress.value = 0\r\n  return false\r\n}\r\n\r\nconst xhrProgress = (mdl) => ({\r\n  config: (xhr) => {\r\n    xhr.onprogress = onProgress(mdl)\r\n    xhr.onload = onLoad\r\n    xhr.onloadstart = onLoadStart(mdl)\r\n    xhr.onloadend = onLoadEnd(mdl)\r\n  },\r\n})\r\n\r\nexport const parseHttpError = (mdl) => (rej) => (e) => {\r\n  mdl.state.isLoading = false\r\n  return rej(e.response.errors)\r\n}\r\n\r\nexport const parseHttpSuccess = (mdl) => (res) => (data) => {\r\n  mdl.state.isLoading = false\r\n  return res(data)\r\n}\r\n\r\nconst getUserToken = () =>\r\n  sessionStorage.getItem(\"token\")\r\n    ? { authorization: sessionStorage.getItem(\"token\") }\r\n    : \"\"\r\n\r\nconst call = (_headers) => (method) => (mdl) => (url) => (body) => {\r\n  mdl.state.isLoading = true\r\n  return new Task((rej, res) =>\r\n    m\r\n      .request({\r\n        method,\r\n        url: api + url,\r\n        headers: {\r\n          \"content-type\": \"application/json\",\r\n          ..._headers,\r\n        },\r\n        body,\r\n        withCredentials: false,\r\n        ...xhrProgress(mdl),\r\n      })\r\n      .then(parseHttpSuccess(mdl)(res), parseHttpError(mdl)(rej))\r\n  )\r\n}\r\n\r\nconst Http = {\r\n  getTask: (mdl) => (url) => call(getUserToken())(\"GET\")(mdl)(url)(null),\r\n  postTask: (mdl) => (url) => (data) =>\r\n    call(getUserToken())(\"POST\")(mdl)(url)(data),\r\n}\r\n\r\nexport default Http\r\n","export const log = (m) => (v) => {\r\n  console.log(m, v), v\r\n}\r\n","import {\r\n  compose,\r\n  curry,\r\n  isEmpty,\r\n  isNil,\r\n  length,\r\n  gte,\r\n  test,\r\n  not,\r\n  view,\r\n  set,\r\n  contains,\r\n  map,\r\n  toUpper,\r\n} from \"ramda\"\r\nimport { Success, Failure } from \"data.validation\"\r\nimport Maybe from \"data.maybe\"\r\n\r\nexport const getOrElse = (val) => (x) => x.getOrElse(val)\r\n\r\nexport const validate = curry((rule, lens, msg, data) =>\r\n  rule(view(lens, data)) ? Success(data) : Failure([set(lens, msg, {})])\r\n)\r\n\r\nexport const isRequired = compose(not, isEmpty)\r\n\r\nexport const IsNotNil = compose(not, isNil)\r\n\r\nexport const isNotNullOrEmpty = (data) => !isNullOrEmpty(data)\r\n\r\nexport const isNullOrEmpty = (data) => isNil(data) || isEmpty(data)\r\n\r\nexport const maxLength = (max) => compose(gte(max), length)\r\n\r\nexport const maxSize = curry((max, value) => gte(max, value))\r\n\r\nexport const emailFormat = test(/@/)\r\n\r\nexport const onlyAlpha = test(/^[a-zA-Z]*$/)\r\n\r\nexport const onlyAlphaNumeric = test(/^[a-zA-Z0-9]*$/)\r\n\r\nexport const onlyAlphaNumericUnderscore = test(/^[a-zA-Z0-9_]*$/)\r\n\r\nexport const onlyAlphaNumericSpace = test(/^[a-zA-Z0-9\\s]*$/)\r\n\r\nexport const onlyAlphaNumericSpaceUnderscore = test(/^[a-zA-Z0-9_\\s]*$/)\r\n\r\nexport const onlyAlphaNumericSpaceSpecial = test(\r\n  /^[a-zA-Z0-9_.~!*''();:@&=+$,/?#[%-\\]+\\s]*$/\r\n)\r\n\r\nexport const phoneFormat = test(/^[0-9]{3}-[0-9]{3}-[0-9]{4}$/)\r\n\r\nexport const urlFormat = test(/^[a-zA-Z0-9_.~!*''();:@&=+$,/?#[%-\\]+]*$/)\r\n\r\nexport const onlyNumeric = test(/^[0-9]*$/)\r\n\r\nexport const maxLengthNullable = (max) =>\r\n  compose(getOrElse(false), map(gte(max)), map(length), Maybe.fromNullable)\r\n\r\nexport const unique = curry((keys, value) => {\r\n  let lookup = Maybe.fromNullable(keys)\r\n  return !contains(\r\n    toUpper(value.toString()),\r\n    map((y) => toUpper(y.toString()), lookup.getOrElse([]))\r\n  )\r\n})\r\n\r\nexport const inDateRange = curry((start, end, value) => {\r\n  if (value == null || value === \"\") {\r\n    return true\r\n  }\r\n\r\n  return new Date(start) <= new Date(value) && new Date(value) < new Date(end)\r\n})\r\n\r\nexport const allCaps = (str) => str.toUpperCase() === str\r\n\r\nexport const isNilOrEmptyOrAtom = (item) =>\r\n  isNil(item) || isEmpty(item) || item === \"{$type:atom}\"\r\n","export const ArticlePreview = () => {\r\n  return {\r\n    view: ({\r\n      attrs: {\r\n        article: {\r\n          author: { image, username },\r\n          createdAt,\r\n          favoritesCount,\r\n          title,\r\n          description,\r\n          tagList,\r\n          slug,\r\n        },\r\n      },\r\n    }) => {\r\n      return m(\".article-preview\", [\r\n        m(\".article-meta\", [\r\n          m(\r\n            m.route.Link,\r\n            { href: `/profile/${username}`, options: { replace: true } },\r\n            m(\"img\", { src: image })\r\n          ),\r\n\r\n          m(\".info\", [\r\n            m(\r\n              m.route.Link,\r\n              {\r\n                class: \"author\",\r\n                href: `/profile/${username}`,\r\n                options: { replace: true },\r\n              },\r\n              username\r\n            ),\r\n            m(\"span.date\", createdAt),\r\n          ]),\r\n          m(\r\n            \"button.btn btn-outline-primary btn-sm pull-xs-right\",\r\n\r\n            [m(\"i.ion-heart\"), m(\"span\", favoritesCount)]\r\n          ),\r\n        ]),\r\n        m(m.route.Link, { class: \"preview-link\", href: `/article/${slug}` }, [\r\n          m(\"h1\", title),\r\n          m(\"p\", description),\r\n          m(\r\n            \"ul.tag-list\",\r\n            tagList.map((tag) => m(\"li.tag-default tag-pill tag-outline\", tag))\r\n          ),\r\n          m(\"span\", \"Read more...\"),\r\n        ]),\r\n      ])\r\n    },\r\n  }\r\n}\r\n","import { ArticlePreview } from \"components\"\r\n\r\nexport const Articles = () => {\r\n  return {\r\n    view: ({ attrs: { mdl, data } }) =>\r\n      data.articles.any()\r\n        ? data.articles.map((article) =>\r\n            m(ArticlePreview, { mdl, data, article })\r\n          )\r\n        : m(\"p\", \"No articles are here... yet.\"),\r\n  }\r\n}\r\n","export const Banner = () => {\r\n  return {\r\n    view: ({ children }) => m(\".banner\", m(\".container\", children)),\r\n  }\r\n}\r\n","export * from \"./banner\"\r\nexport * from \"./loader\"\r\nexport * from \"./paginator\"\r\nexport * from \"./articles\"\r\nexport * from \"./article-preview\"\r\n","export const Loader = () => {\r\n  return {\r\n    view: ({ children }) =>\r\n      m(\".container\", m(\".banner\", m(\".container\", children))),\r\n  }\r\n}\r\n","export const Paginator = () => {\r\n  return {\r\n    view: ({ attrs: { mdl, state, fetchDataFor } }) => {\r\n      let total = state.total / state.limit\r\n      let current = state.offset / state.limit\r\n      let range = [...Array(total).keys()].slice(1)\r\n      console.log(state)\r\n      return m(\r\n        \"ul.pagination\",\r\n        range.map((page) => {\r\n          return m(\r\n            `li.page-item ${page == current && \"active\"}`,\r\n            m(\".page-link active\", { onclick: (e) => fetchDataFor(page) }, page)\r\n          )\r\n        })\r\n      )\r\n    },\r\n  }\r\n}\r\n","import routes from \"./routes.js\"\nimport model from \"./model.js\"\nimport { FunConfig } from \"@boazblake/fun-config\"\n\nFunConfig.configure()\n\nconst root = document.body\nlet winW = window.innerWidth\n\nif (module.hot) {\n  module.hot.accept()\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  console.log(\"Looks like we are in development mode!\")\n} else {\n  if (\"serviceWorker\" in navigator) {\n    window.addEventListener(\"load\", () => {\n      navigator.serviceWorker\n        .register(\"./service-worker.js\")\n        .then((registration) => {\n          console.log(\" SW registered: \", registration)\n        })\n        .catch((registrationError) => {\n          console.log(\" SW registration failed: \", registrationError)\n        })\n    })\n  }\n}\n\n// set display profiles\nconst getProfile = (w) => {\n  if (w < 668) return \"phone\"\n  if (w < 920) return \"tablet\"\n  return \"desktop\"\n}\n\nconst checkWidth = (winW) => {\n  const w = window.innerWidth\n  if (winW !== w) {\n    winW = w\n    var lastProfile = model.settings.profile\n    model.settings.profile = getProfile(w)\n    if (lastProfile != model.settings.profile) m.redraw()\n  }\n  return requestAnimationFrame(checkWidth)\n}\n\nmodel.settings.profile = getProfile(winW)\n\ncheckWidth(winW)\n\nif (sessionStorage.getItem(\"user\")) {\n  model.user = JSON.parse(sessionStorage.getItem(\"user\"))\n}\n\nm.route(root, \"/home\", routes(model))\n","document.addEventListener(\"DOMContentLoaded\", () => {\n  require(\"./index.js\")\n})\n","const footer = () => {\r\n  return {\r\n    view: () =>\r\n      m(\r\n        \"footer\",\r\n        m(\"div\", { class: \"container\" }, [\r\n          m(\"a\", { class: \"logo-font\", href: \"/\" }, \"conduit\"),\r\n          m(\"span\", { class: \"attribution\" }, [\r\n            \" An interactive learning project from \",\r\n            m(\"a\", { href: \"https://thinkster.io\" }, \"Thinkster\"),\r\n            \". Code \",\r\n            m.trust(\"&amp;\"),\r\n            \" design licensed under MIT. \",\r\n          ]),\r\n        ])\r\n      ),\r\n  }\r\n}\r\n\r\nexport default footer\r\n","const Header = () => {\r\n  return {\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        \"nav.navbar navbar-light\",\r\n        m(\r\n          \".container\",\r\n          m(\"a.navbar-brand\", { href: \"#\" }, \"conduit\"),\r\n          m(\r\n            \"ul.nav navbar-nav pull-xs-right\",\r\n            mdl.user\r\n              ? [\r\n                  m(\r\n                    \"li.nav-item\",\r\n                    m(\r\n                      m.route.Link,\r\n                      { class: \"nav-link\", href: \"/register\" },\r\n                      \"New Article\"\r\n                    )\r\n                  ),\r\n                  m(\r\n                    \"li.nav-item\",\r\n                    m(\r\n                      m.route.Link,\r\n                      {\r\n                        class: \"nav-link\",\r\n                        href: `/settings/${mdl.user.username}`,\r\n                      },\r\n                      \"Settings\"\r\n                    )\r\n                  ),\r\n                  m(\r\n                    \"li.nav-item\",\r\n                    m(\r\n                      m.route.Link,\r\n                      {\r\n                        class: \"nav-link\",\r\n                        href: `/profile/${mdl.user.username}`,\r\n                      },\r\n                      mdl.user.username\r\n                    )\r\n                  ),\r\n                ]\r\n              : [\r\n                  m(\r\n                    \"li.nav-item\",\r\n                    m(\r\n                      m.route.Link,\r\n                      { class: \"nav-link\", href: \"/register\" },\r\n                      \"Sign up\"\r\n                    )\r\n                  ),\r\n                  m(\r\n                    \"li.nav-item\",\r\n                    m(\r\n                      m.route.Link,\r\n                      { class: \"nav-link\", href: \"/login\" },\r\n                      \"Login\"\r\n                    )\r\n                  ),\r\n                ]\r\n          )\r\n        )\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Header\r\n","import Header from \"./header.js\"\r\nimport Footer from \"./footer.js\"\r\n\r\nconst Layout = () => {\r\n  return {\r\n    view: ({ children, attrs: { mdl } }) =>\r\n      m(\"\", [m(Header, { mdl }), children, m(Footer, { mdl })]),\r\n  }\r\n}\r\n\r\nexport default Layout\r\n","const model = {\n  state: { isLoading: false, loadingProgress: { max: 0, value: 0 } },\n  settings: {},\n  page: \"\",\n}\n\nexport default model\n","import Http from \"Http\"\r\nimport { loadDataTask } from \"./model\"\r\nimport { Banner } from \"components\"\r\n\r\nconst FollowComponent = () => {\r\n  return {\r\n    view: ({\r\n      attrs: {\r\n        mdl,\r\n        data: { username, image, createdAt },\r\n      },\r\n    }) => {\r\n      return m(\"div.article-meta\", [\r\n        m(\r\n          m.route.Link,\r\n          { href: `profile/${username}` },\r\n          m(\"img\", { src: image })\r\n        ),\r\n        m(\"div.info\", [\r\n          m(\r\n            m.route.Link,\r\n            { class: \"author\", href: `profile/${username}` },\r\n            username\r\n          ),\r\n          m(\"span.date\", createdAt),\r\n        ]),\r\n        m(\"button.btn.btn-sm.btn-outline-secondary\", [\r\n          m(\"i.ion-plus-round\"),\r\n          \" \",\r\n          m.trust(\"&nbsp;\"),\r\n          ` Follow ${username} `,\r\n          m(\"span.counter\", \"(10)\"),\r\n        ]),\r\n        \" \",\r\n        m.trust(\"&nbsp;\"),\r\n        m.trust(\"&nbsp;\"),\r\n        \" \",\r\n        m(\"button.btn.btn-sm.btn-outline-primary\", [\r\n          m(\"i.ion-heart\"),\r\n          \" \",\r\n          m.trust(\"&nbsp;\"),\r\n          \" Favorite Post \",\r\n          m(\"span.counter\", \"(29)\"),\r\n        ]),\r\n      ])\r\n    },\r\n  }\r\n}\r\n\r\nconst CommentForm = () => {\r\n  return {\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\"form.card.comment-form\", [\r\n        m(\r\n          \"div.card-block\",\r\n          m(\"textarea.form-control[placeholder='Write a comment...'][rows='3']\")\r\n        ),\r\n        m(\"div.card-footer\", [\r\n          m(\"img.comment-author-img[src='http://i.imgur.com/Qr71crq.jpg']\"),\r\n          m(\"button.btn.btn-sm.btn-primary\", \" Post Comment \"),\r\n        ]),\r\n      ]),\r\n  }\r\n}\r\n\r\nconst Comment = () => {\r\n  return {\r\n    view: ({\r\n      attrs: {\r\n        mdl,\r\n        comment: {\r\n          author: { image, username },\r\n          body,\r\n          createdAt,\r\n          id,\r\n        },\r\n      },\r\n    }) =>\r\n      m(\"div.card\", [\r\n        m(\"div.card-block\", m(\"p.card-text\", body)),\r\n        m(\"div.card-footer\", [\r\n          m(\r\n            m.route.Link,\r\n            { class: \"comment-author\" },\r\n            m(\"img.comment-author-img\", { src: image })\r\n          ),\r\n          \" \",\r\n          m.trust(\"&nbsp;\"),\r\n          \" \",\r\n          m(m.route.Link, { class: \"comment-author\" }, username),\r\n          m(\"span.date-posted\", createdAt),\r\n        ]),\r\n      ]),\r\n  }\r\n}\r\n\r\nconst ArticleComments = () => {\r\n  return {\r\n    view: ({ attrs: { mdl, comments } }) => {\r\n      return [\r\n        m(CommentForm, { mdl }),\r\n        comments.map((c) => m(Comment, { mdl, comment: c })),\r\n      ]\r\n    },\r\n  }\r\n}\r\n\r\nconst Article = () => {\r\n  const data = {}\r\n  const state = {\r\n    status: \"loading\",\r\n    error: null,\r\n  }\r\n\r\n  const onSuccess = ({ article, comments }) => {\r\n    data.article = article\r\n    data.comments = comments\r\n    console.log(\"data\", data)\r\n    state.status = \"success\"\r\n  }\r\n\r\n  const onError = (error) => {\r\n    console.log(\"error\", error)\r\n    state.error = error\r\n    state.status = \"error\"\r\n  }\r\n\r\n  const loadData = (mdl) => {\r\n    state.status = \"loading\"\r\n    loadDataTask(Http)(mdl)(mdl.slug).fork(onError, onSuccess)\r\n  }\r\n\r\n  return {\r\n    oninit: ({ attrs: { mdl } }) => loadData(mdl),\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\"div.article-page\", [\r\n        state.status == \"loading\" &&\r\n          m(Banner, [m(\"h1.logo-font\", \"Loading ...\")]),\r\n        state.status == \"error\" &&\r\n          m(Banner, [m(\"h1.logo-font\", `Error Loading Data: ${state.error}`)]),\r\n        state.status == \"success\" && [\r\n          m(\r\n            \"div.banner\",\r\n            m(\"div.container\", [\r\n              m(\"h1\", data.article.title),\r\n              m(FollowComponent, { mdl, data: data.article.author }),\r\n            ])\r\n          ),\r\n          m(\"div.container.page\", [\r\n            m(\"div.row.article-content\", m(\"div.col-md-12\", data.article.body)),\r\n            m(\"hr\"),\r\n            m(\r\n              \"div.article-actions\",\r\n              m(FollowComponent, { mdl, data: data.article.author })\r\n            ),\r\n            m(\r\n              \"div.row\",\r\n              m(\r\n                \"div.col-xs-12.col-md-8.offset-md-2\",\r\n                m(ArticleComments, { mdl, comments: data.comments })\r\n              )\r\n            ),\r\n          ]),\r\n        ],\r\n      ]),\r\n  }\r\n}\r\n\r\nexport default Article\r\n","const getCommentsTask = (http) => (mdl) => (slug) =>\r\n  http.getTask(mdl)(`articles/${slug}/comments`)\r\nconst getArticleTask = (http) => (mdl) => (slug) =>\r\n  http.getTask(mdl)(`articles/${slug}`)\r\n\r\nexport const loadDataTask = (http) => (mdl) => (slug) =>\r\n  Task.of((article) => (comments) => ({ ...article, ...comments }))\r\n    .ap(getArticleTask(http)(mdl)(slug))\r\n    .ap(getCommentsTask(http)(mdl)(slug))\r\n","import Http from \"Http\"\r\nimport { validateLoginTask, loginTask } from \"./model\"\r\n\r\nconst Login = () => {\r\n  const state = { errors: {}, isSubmitted: false, isValid: false }\r\n  const data = {\r\n    email: \"\",\r\n    password: \"\",\r\n  }\r\n\r\n  const validate = (e) => {\r\n    const onSuccess = (s) => {\r\n      state.isValid = true\r\n    }\r\n\r\n    const onError = (errors) => {\r\n      state.isValid = false\r\n      state.errors = errors\r\n    }\r\n\r\n    validateLoginTask(data).fork(onError, onSuccess)\r\n  }\r\n\r\n  const onSubmit = (mdl) => {\r\n    const onSuccess = ({ user }) => {\r\n      state.isValid = true\r\n      sessionStorage.setItem(\"token\", `Token ${user.token}`)\r\n      sessionStorage.setItem(\"user\", JSON.stringify(user))\r\n      mdl.user = user\r\n      m.route.set(\"/home\")\r\n    }\r\n\r\n    const onError = (errors) => {\r\n      state.isValid = false\r\n      state.errors = errors\r\n      console.log(state.errors)\r\n    }\r\n\r\n    state.isSubmitted = true\r\n    validateLoginTask(data).chain(loginTask(Http)(mdl)).fork(onError, onSuccess)\r\n  }\r\n\r\n  return {\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        \"div.auth-page\",\r\n        m(\r\n          \"div.container.page\",\r\n          m(\r\n            \"div.row\",\r\n            m(\"div.col-md-6.offset-md-3.col-xs-12\", [\r\n              m(\"h1.text-xs-center\", \"Login\"),\r\n              m(\r\n                \"p.text-xs-center\",\r\n                m(m.route.Link, { href: \"/register\" }, \"Need an account?\"),\r\n                state.errors[\"email or password\"] &&\r\n                  m(\r\n                    \".error-messages\",\r\n                    m(\r\n                      \"span\",\r\n                      `email or password  ${state.errors[\"email or password\"]}`\r\n                    )\r\n                  )\r\n              ),\r\n              m(\"form\", [\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"text\",\r\n                    placeholder: \"email\",\r\n                    onchange: (e) => (data.email = e.target.value),\r\n                    value: data.email,\r\n                    onblur: (e) => state.isSubmitted && validate,\r\n                  }),\r\n                  state.errors.email &&\r\n                    m(\".error-messages\", m(\"span\", state.errors.email))\r\n                ),\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"password\",\r\n                    placeholder: \"password\",\r\n                    onchange: (e) => (data.password = e.target.value),\r\n                    value: data.password,\r\n                    onblur: (e) => state.isSubmitted && validate,\r\n                  }),\r\n                  state.errors.password &&\r\n                    m(\".error-messages\", m(\"span\", state.errors.password))\r\n                ),\r\n                m(\r\n                  \"button.btn.btn-lg.btn-primary.pull-xs-right\",\r\n                  { type: \"submit\", onclick: (e) => onSubmit(mdl) },\r\n                  \"Login\"\r\n                ),\r\n              ]),\r\n            ])\r\n          )\r\n        )\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Login\r\n","export * from \"./model.validate\"\r\n\r\nexport const loginTask = (http) => (mdl) => (user) =>\r\n  http.postTask(mdl)(\"users/login\")({ user })\r\n\r\nexport const registerTask = (http) => (mdl) => (user) =>\r\n  http.postTask(mdl)(\"users\")({ user })\r\n","import { curryN, identity, lensProp, mergeAll } from \"ramda\"\r\nimport { Success } from \"data.validation\"\r\nimport { validate, isRequired, emailFormat } from \"Validations\"\r\nconst ValidateRegistration = Success(curryN(3, identity))\r\nconst ValidateLogin = Success(curryN(2, identity))\r\n\r\nconst nameLense = lensProp(\"name\")\r\nconst passwordLense = lensProp(\"password\")\r\nconst emailLense = lensProp(\"email\")\r\n\r\nconst NAME_REQUIRED_MSG = \"A Name is required\"\r\nconst PASSWORD_REQUIRED_MSG = \"A Password is required\"\r\nconst EMAIL_REQUIRED_MSG = \"An Email is required\"\r\nconst INVALID_EMAIL_FORMAT = \"Email must be a valid format\"\r\n\r\nconst validateName = (data) =>\r\n  Success(data).apLeft(validate(isRequired, nameLense, NAME_REQUIRED_MSG, data))\r\n\r\nconst validateEmail = (data) =>\r\n  Success(data)\r\n    .apLeft(validate(isRequired, emailLense, EMAIL_REQUIRED_MSG, data))\r\n    .apLeft(validate(emailFormat, emailLense, INVALID_EMAIL_FORMAT, data))\r\n\r\nconst validatePassword = (data) =>\r\n  Success(data).apLeft(\r\n    validate(isRequired, passwordLense, PASSWORD_REQUIRED_MSG, data)\r\n  )\r\n\r\nexport const validateRegisterTask = (data) =>\r\n  ValidateRegistration.ap(validateName(data))\r\n    .ap(validateEmail(data))\r\n    .ap(validatePassword(data))\r\n    .failureMap(mergeAll)\r\n    .toTask()\r\n\r\nexport const validateLoginTask = (data) =>\r\n  ValidateLogin.ap(validateEmail(data))\r\n    .ap(validatePassword(data))\r\n    .failureMap(mergeAll)\r\n    .toTask()\r\n","import Http from \"Http\"\r\nimport { validateRegisterTask, registerTask } from \"./model\"\r\n\r\nconst Register = () => {\r\n  const state = { errors: {}, isSubmitted: false, isValid: false }\r\n  const data = {\r\n    username: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  }\r\n\r\n  const validate = (e) => {\r\n    const onSuccess = (s) => {\r\n      state.isValid = true\r\n    }\r\n\r\n    const onError = (errors) => {\r\n      state.isValid = false\r\n      state.errors = errors\r\n    }\r\n\r\n    validateRegisterTask(data).fork(onError, onSuccess)\r\n  }\r\n\r\n  const onSubmit = (mdl) => {\r\n    const onSuccess = ({ user }) => {\r\n      state.isValid = true\r\n      mdl.user = user\r\n      sessionStorage.setItem(\"token\", `Token ${user.token}`)\r\n      m.route.set(\"/home\")\r\n      console.log(\"success\", user)\r\n    }\r\n\r\n    const onError = (errors) => {\r\n      state.isValid = false\r\n      state.errors = errors\r\n      console.log(errors)\r\n    }\r\n\r\n    state.isSubmitted = true\r\n    validateRegisterTask(data)\r\n      .chain(registerTask(Http)(mdl))\r\n      .fork(onError, onSuccess)\r\n  }\r\n\r\n  return {\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        \"div.auth-page\",\r\n        m(\r\n          \"div.container.page\",\r\n          m(\r\n            \"div.row\",\r\n            m(\"div.col-md-6.offset-md-3.col-xs-12\", [\r\n              m(\"h1.text-xs-center\", \"Sign Up\"),\r\n              m(\r\n                \"p.text-xs-center\",\r\n                m(m.route.Link, { href: \"/login\" }, \"Have an account?\"),\r\n                state.errors[\"email or password\"] &&\r\n                  m(\r\n                    \".error-messages\",\r\n                    m(\r\n                      \"span\",\r\n                      `email or password  ${state.errors[\"email or password\"]}`\r\n                    )\r\n                  )\r\n              ),\r\n              m(\"form\", [\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"text\",\r\n                    placeholder: \"Your Name\",\r\n                    onchange: (e) => (data.username = e.target.value),\r\n                    value: data.username,\r\n                    onblur: (e) => state.isSubmitted && validate,\r\n                  }),\r\n                  state.errors.username &&\r\n                    state.errors.username.map((error) =>\r\n                      m(\".error-messages\", m(\"span\", error))\r\n                    )\r\n                ),\r\n\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"text\",\r\n                    placeholder: \"email\",\r\n                    onchange: (e) => (data.email = e.target.value),\r\n                    value: data.email,\r\n                    onblur: (e) => state.isSubmitted && validate,\r\n                  }),\r\n                  state.errors.email &&\r\n                    m(\".error-messages\", m(\"span\", state.errors.email))\r\n                ),\r\n                m(\r\n                  \"fieldset.form-group\",\r\n                  m(\"input.form-control.form-control-lg\", {\r\n                    type: \"password\",\r\n                    placeholder: \"password\",\r\n                    onchange: (e) => (data.password = e.target.value),\r\n                    value: data.password,\r\n                    onblur: (e) => state.isSubmitted && validate,\r\n                  }),\r\n                  state.errors.password &&\r\n                    m(\".error-messages\", m(\"span\", state.errors.password))\r\n                ),\r\n                m(\r\n                  \"button.btn.btn-lg.btn-primary.pull-xs-right\",\r\n                  { type: \"submit\", onclick: (e) => onSubmit(mdl) },\r\n                  \"Sign Up\"\r\n                ),\r\n              ]),\r\n            ])\r\n          )\r\n        )\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Register\r\n","import { without } from \"ramda\"\n\nconst FeedNav = ({ attrs: { fetchData } }) => {\n  return {\n    view: ({ attrs: { mdl, data } }) => {\n      console.log(mdl)\n      return m(\n        \".feed-toggle\",\n        m(\"ul.nav nav-pills outline-active\", [\n          mdl.user &&\n            m(\n              \"li.nav-item\",\n              m(\n                `.nav-link ${data.tags.current == \"feed\" && \"active\"}`,\n                {\n                  onclick: (e) => {\n                    data.tags.current = \"feed\"\n                    fetchData(mdl)\n                  },\n                },\n                \"Your Feed\"\n              )\n            ),\n\n          m(\n            \"li.nav-item\",\n            m(\n              `.nav-link ${data.tags.current == \"\" && \"active\"}`,\n              {\n                onclick: (e) => {\n                  data.tags.current = \"\"\n                  fetchData(mdl)\n                },\n              },\n              \"Global Feed\"\n            )\n          ),\n\n          data.tags.selected.map((tag) =>\n            m(\n              \"li.nav-item\",\n              m(`.nav-link ${data.tags.current == tag && \"active\"}`, [\n                m(\n                  \"span\",\n                  {\n                    onclick: (e) => {\n                      data.tags.current = tag\n                      fetchData(mdl)\n                    },\n                  },\n                  tag\n                ),\n                m(\"i.ion-close-circled\", {\n                  onclick: (e) =>\n                    (data.tags.selected = without(tag, data.tags.selected)),\n                }),\n              ])\n            )\n          ),\n        ])\n      )\n    },\n  }\n}\n\nexport default FeedNav\n","import Http from \"Http\"\nimport { loadDataTask, getArticlesTask } from \"./model\"\nimport { Banner, Loader, Paginator, Articles } from \"components\"\nimport SideBar from \"./sidebar\"\nimport FeedNav from \"./feednav.js\"\n\nconst Home = () => {\n  const data = {\n    tags: { tagList: [], selected: [], current: \"\" },\n    articles: {},\n  }\n  const state = {\n    feedStatus: \"loading\",\n    pageStatus: \"loading\",\n    limit: 20,\n    offset: 0,\n    total: 0,\n    error: null,\n  }\n\n  const loadInitData = (mdl) => {\n    const onSuccess = ({ articles, articlesCount, tags }) => {\n      data.articles = articles\n      state.total = articlesCount\n      data.tags.tagList = tags\n      state.pageStatus = \"success\"\n      state.feedStatus = \"success\"\n    }\n\n    const onError = (error) => {\n      console.log(\"error\", error)\n      state.error = error\n      state.pageStatus = \"error\"\n    }\n    state.pageStatus = \"loading\"\n    loadDataTask(Http)(mdl)(state)(data).fork(onError, onSuccess)\n  }\n\n  const loadArticles = (mdl) => {\n    const onSuccess = ({ articles, articlesCount }) => {\n      data.articles = articles\n      state.total = articlesCount\n      state.feedStatus = \"success\"\n    }\n\n    const onError = (error) => {\n      console.log(\"error\", error)\n      state.error = error\n      state.feedStatus = \"error\"\n    }\n\n    state.feedStatus = \"loading\"\n    getArticlesTask(Http)(mdl)(state)(data).fork(onError, onSuccess)\n  }\n\n  return {\n    oninit: ({ attrs: { mdl } }) => loadInitData(mdl),\n    view: ({ attrs: { mdl } }) => {\n      return m(\".home\", [\n        !mdl.user &&\n          m(Banner, [\n            m(\"h1.logo-font\", \"conduit\"),\n            m(\"p\", \"A place to share your knowledge.\"),\n          ]),\n\n        state.pageStatus == \"loading\" &&\n          m(Loader, [m(\"h1.logo-font\", `Loading Data`)]),\n\n        state.pageStatus == \"error\" &&\n          m(Banner, [m(\"h1.logo-font\", `Error Loading Data: ${state.error}`)]),\n\n        state.pageStatus == \"success\" &&\n          m(\n            \".container page\",\n            m(\".row\", [\n              m(\".col-md-9\", [\n                m(FeedNav, { fetchData: loadArticles, mdl, data }),\n\n                state.feedStatus == \"loading\" && m(\"p\", \"Loading Articles ...\"),\n\n                state.feedStatus == \"success\" && m(Articles, { mdl, data }),\n\n                m(Paginator, {\n                  mdl,\n                  state,\n                  fetchDataFor: (offset) => {\n                    state.offset = offset * state.limit\n                    loadArticles(mdl)\n                  },\n                }),\n              ]),\n\n              m(\".col-md-3\", m(SideBar, { mdl, data })),\n            ])\n          ),\n      ])\n    },\n  }\n}\n\nexport default Home\n","const getTagsTask = (http) => (mdl) => http.getTask(mdl)(\"tags\")\nexport const getArticlesTask = (http) => (mdl) => (state) => (data) =>\n  data.tags.current == \"feed\"\n    ? http.getTask(mdl)(`articles/feed?limit=20&offset=${state.offset}`)\n    : http.getTask(mdl)(\n        `articles?limit=20&offset=${state.offset}&tag=${data.tags.current}`\n      )\n\nexport const loadDataTask = (http) => (mdl) => (state) => (data) =>\n  Task.of((tags) => (articles) => ({ ...tags, ...articles }))\n    .ap(getTagsTask(http)(mdl))\n    .ap(getArticlesTask(http)(mdl)(state)(data))\n","const SideBar = () => {\n  const selectTag = (data, tag) => (e) => data.tags.selected.push(tag)\n\n  return {\n    view: ({ attrs: { mdl, data } }) => {\n      return m(\".sidebar\", [\n        m(\"p\", \"Popular Tags\"),\n        m(\n          \".tag-list\",\n          data.tags.tagList.map((tag) =>\n            m(\".tag-pill tag-default\", { onclick: selectTag(data, tag) }, tag)\n          )\n        ),\n      ])\n    },\n  }\n}\n\nexport default SideBar\n","import Http from \"Http\"\r\nimport { loadDataTask } from \"./model\"\r\nimport { Banner, Loader, Articles } from \"components\"\r\n\r\nconst Profile = () => {\r\n  const data = {}\r\n  const state = {\r\n    status: \"loading\",\r\n    showFaveArticles: false,\r\n    limit: 20,\r\n    offset: 0,\r\n    total: 0,\r\n    error: null,\r\n  }\r\n\r\n  const onSuccess = ({ authorArticles, authorFavoriteArticles, profile }) => {\r\n    data.authorArticles = authorArticles\r\n    data.authorFavoriteArticles = authorFavoriteArticles\r\n    data.profile = profile\r\n    state.status = \"success\"\r\n  }\r\n\r\n  const onError = (error) => {\r\n    console.log(\"error\", error)\r\n    state.error = error\r\n    state.status = \"error\"\r\n  }\r\n\r\n  const loadData = (mdl) => {\r\n    state.status = \"loading\"\r\n    loadDataTask(Http)(mdl)(state).fork(onError, onSuccess)\r\n  }\r\n  return {\r\n    oninit: ({ attrs: { mdl } }) => loadData(mdl),\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        \".profile-page\",\r\n\r\n        state.status == \"loading\" &&\r\n          m(Loader, [m(\"h1.logo-font\", \"Loading ...\")]),\r\n        state.status == \"error\" &&\r\n          m(Banner, [m(\"h1.logo-font\", `Error Loading Data: ${state.error}`)]),\r\n        state.status == \"success\" && [\r\n          m(\r\n            \".user-info\",\r\n            m(\r\n              \".container\",\r\n              m(\r\n                \".row\",\r\n                m(\".col-xs-12.col-md-10.offset-md-1\", [\r\n                  m(\"img.user-img\", { src: data.profile.image }),\r\n                  m(\"h4\", data.profile.username),\r\n                  m(\"p\", data.profile.bio),\r\n                  data.profile.username !== mdl.user.username\r\n                    ? m(\"button.btn.btn-sm.btn-outline-secondary.action-btn\", [\r\n                        m(\"i.ion-plus-round\"),\r\n                        \" \",\r\n                        m.trust(\"&nbsp;\"),\r\n                        `Follow ${data.profile.username}`,\r\n                      ])\r\n                    : m(\r\n                        \"button.btn.btn-sm.btn-outline-secondary.action-btn\",\r\n                        {\r\n                          onclick: (e) =>\r\n                            m.route.set(`/settings/${data.profile.username}`),\r\n                        },\r\n                        [\r\n                          m(\"i.ion-gear-a\"),\r\n                          \" \",\r\n                          m.trust(\"&nbsp;\"),\r\n                          `Edit Profile Settings`,\r\n                        ]\r\n                      ),\r\n                ])\r\n              )\r\n            )\r\n          ),\r\n          m(\r\n            \".container\",\r\n            m(\r\n              \".row\",\r\n              m(\".col-xs-12.col-md-10.offset-md-1\", [\r\n                m(\r\n                  \".articles-toggle\",\r\n                  m(\"ul.nav.nav-pills.outline-active\", [\r\n                    m(\r\n                      \"li.nav-item\",\r\n                      m(\r\n                        `.nav-link ${!state.showFaveArticles && \"active\"}`,\r\n                        {\r\n                          onclick: (e) => (state.showFaveArticles = false),\r\n                        },\r\n                        \"My Articles\"\r\n                      )\r\n                    ),\r\n                    m(\r\n                      \"li.nav-item\",\r\n                      m(\r\n                        `.nav-link ${state.showFaveArticles && \"active\"}`,\r\n                        {\r\n                          onclick: (e) => (state.showFaveArticles = true),\r\n                        },\r\n                        \"Favorited Articles\"\r\n                      )\r\n                    ),\r\n                  ])\r\n                ),\r\n                state.showFaveArticles\r\n                  ? m(Articles, { mdl, data: data.authorFavoriteArticles })\r\n                  : m(Articles, { mdl, data: data.authorArticles }),\r\n              ])\r\n            )\r\n          ),\r\n        ]\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Profile\r\n","const getProfileTask = (http) => (mdl) => (username) =>\r\n  http.getTask(mdl)(`profiles/${username}`)\r\n\r\nconst getAuthorArticlesTask = (http) => (mdl) => (state) => (username) =>\r\n  http.getTask(mdl)(\r\n    `articles?limit=20&offset=${state.offset}&author=${username}`\r\n  )\r\n\r\nconst getAuthorFavoriteArticlesTask = (http) => (mdl) => (state) => (\r\n  username\r\n) =>\r\n  http.getTask(mdl)(\r\n    `articles?limit=20&offset=${state.offset}&favorited=${username}`\r\n  )\r\n\r\nexport const loadDataTask = (http) => (mdl) => (state) =>\r\n  Task.of((profile) => (authorArticles) => (authorFavoriteArticles) => ({\r\n    ...profile,\r\n    authorArticles,\r\n    authorFavoriteArticles,\r\n  }))\r\n    .ap(getProfileTask(http)(mdl)(mdl.slug))\r\n    .ap(getAuthorArticlesTask(http)(mdl)(state)(mdl.slug))\r\n    .ap(getAuthorFavoriteArticlesTask(http)(mdl)(state)(mdl.slug))\r\n","import { loadTask } from \"./model\"\r\n\r\nconst Settings = ({ attrs: { mdl } }) => {\r\n  let data = JSON.parse(JSON.stringify(mdl.user))\r\n  return {\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        \".settings-page\",\r\n        m(\r\n          \".container.page\",\r\n          m(\r\n            \".row\",\r\n            m(\".col-md-6.offset-md-3.col-xs-12\", [\r\n              m(\"h1.text-xs-center\", \"Your Settings\"),\r\n              m(\r\n                \"form\",\r\n                m(\"fieldset\", [\r\n                  m(\r\n                    \"fieldset.form-group\",\r\n                    m(\"input.form-control.form-control-lg\", {\r\n                      type: \"text\",\r\n                      placeholder: \"URL of profile picture\",\r\n                      onchange: (e) => (data.image = e.target.value),\r\n                      value: data.image,\r\n                    })\r\n                  ),\r\n                  m(\r\n                    \"fieldset.form-group\",\r\n                    m(\"input.form-control.form-control-lg\", {\r\n                      type: \"text\",\r\n                      placeholder: \"Your Name\",\r\n                      onchange: (e) => (data.username = e.target.value),\r\n                      value: data.username,\r\n                    })\r\n                  ),\r\n                  m(\r\n                    \"fieldset.form-group\",\r\n                    m(\"input.form-control.form-control-lg\", {\r\n                      type: \"text\",\r\n                      placeholder: \"Short bio about you\",\r\n                      onchange: (e) => (data.bio = e.target.value),\r\n                      value: data.bio,\r\n                    })\r\n                  ),\r\n                  m(\r\n                    \"fieldset.form-group\",\r\n                    m(\r\n                      \"fieldset.form-group\",\r\n                      m(\"input.form-control.form-control-lg\", {\r\n                        type: \"text\",\r\n                        placeholder: \"Email\",\r\n                        onchange: (e) => (data.email = e.target.value),\r\n                        value: data.email,\r\n                      })\r\n                    )\r\n                  ),\r\n                  m(\r\n                    \"fieldset.form-group\",\r\n                    m(\r\n                      \"fieldset.form-group\",\r\n                      m(\"input.form-control.form-control-lg\", {\r\n                        type: \"password\",\r\n                        placeholder: \"Password\",\r\n                        onchange: (e) => (data.password = e.target.value),\r\n                        value: data.password,\r\n                      })\r\n                    )\r\n                  ),\r\n                  m(\r\n                    \"button.btn.btn-lg.btn-primary.pull-xs-right\",\r\n                    \" Update Settings \"\r\n                  ),\r\n                ])\r\n              ),\r\n            ])\r\n          )\r\n        )\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Settings\r\n","export const loadTask = () => {}\r\n","import Layout from \"./layout/index\"\nimport Home from \"./pages/home/index\"\nimport Article from \"./pages/article/index\"\nimport Profile from \"./pages/profile/index\"\nimport Register from \"./pages/auth/register\"\nimport Login from \"./pages/auth/login\"\nimport Settings from \"./pages/settings/index\"\n\nconst routes = (mdl) => {\n  return {\n    \"/home\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Home, { mdl })),\n    },\n\n    \"/article/:slug\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Article, { mdl })),\n    },\n\n    \"/profile/:slug\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Profile, { mdl, key: mdl.slug })),\n    },\n\n    \"/settings/:slug\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Settings, { mdl, key: mdl.slug })),\n    },\n\n    \"/login\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Login, { mdl })),\n    },\n\n    \"/register\": {\n      onmatch: ({ slug }) => {\n        mdl.slug = slug\n      },\n      render: () => m(Layout, { mdl }, m(Register, { mdl })),\n    },\n  }\n}\n\nexport default routes\n"]}